<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    

    <title>GIF Collector</title>

</head>
<body>
    <div class="row" id="keywords">
        <button class="btn btn-primary animalButton" data-animal="cat">Cats</button>
        <button class="btn btn-primary animalButton" data-animal="fish">Fish</button>
        <button class="btn btn-primary animalButton" data-animal="bird">Birds</button>
    </div>
    <form class="form-inline">
        <input id="userInput" class="form-control" type="text" placeholder="Type an animal">
        <button id="search" class="btn btn-primary" type="submit">Search</button>
    </form>
    <div class="row" id="display">

    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">

//var animals = ["cats", "fish", "birds"];
var userCommand;

$(document).on("click", ".animalButton", function() {
    var animal = $(this).data("animal");
    console.log(this);
    var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + animal + "&api_key=G9eOse8L8DDWW2F60ZVQK0VRHLQ8fREb&limit=5";
    
    $("#display").empty();

    $.ajax({
        url: queryURL,
        method: "GET"
    }).then(response => {
        var results = response.data;
        for (var i = 0; i < results.length; i++) {
            var animalDiv = $("<div>");
            var pRating = $("<p>").text("Rated: " + results[i].rating.toUpperCase());
            var animalGIF = $("<img>").attr("src", results[i].images.original.url);
            animalDiv.append(animalGIF, pRating);
            $("#display").append(animalDiv);
        }
    });
});

$("#search").on("click", function(event) {
    event.preventDefault();    
    userCommand = $("#userInput").val();
    var newButton = $(`<button class='btn btn-primary animalButton' style='text-transform: capitalize;' data-animal=${userCommand}>`).html(userCommand);
    $("#keywords").append(newButton);
});
   
</script>
</body>
</html>